
\section{Backend}
Backendová část projektu má za úkol získat data od jednotlivých dopravních podniků, získat data z Celostátního informačního systému o jízdních řádech\cite{cisjr} a za pomoci GraphQL je zprostředkovat frontendové části.
\subsection{Využité technologie}
Backendová část projektu je napsaná v programovacího jazyka GO. Routovaní zajišťuje jednoduchá knihovna Chi-go. Hlavním endpointem celé aplikace je "/query", za který odpovídá GraphQL, jenž se stará o dotazy a subscriptions. Díky využití GraphQL subscriptions je frontend schopen zobrazovat data v téměř reálném čase.\par

/*golang, redis, mongo, docker, graphql, clouflare tunnels*/
\subsection{Služby}
Samotný backend využívá návrhovou architekturu mikroslužeb (microservices). Je rozdělen na několik menších částí, které mají za úkol jiné operace. První mikroslužba se zabývá stahováním a zpracováváním dat pro strojové čtení jízdních řádů, tato data se díky vyhlášce\cite{vyhlaskaJizdniRady} nacházejí na jednotném serveru, na toto téma dále \ref{strojoveCteniJR}. V aktuální době však neexistuje žádné podobné nařízení, které by upravovalo zveřejňování dat o aktuálních polohách vozidel. Nejednotnost těchto dat znamená, že pro každý dopravní podnik musela být vytvořena mikroslužba s individuálním konektorem. Poslední důležitou službou je samotná komunikace s frontendovou částí.
\subsection [Jízdní řády]{Strojové čtení jízdních řádů} \label{strojoveCteniJR}
Podle vyhlášky\cite{vyhlaskaJizdniRady} musí jednotlivé dopravní podniky zveřejňovat jízdní řády spojů. Jedna microservice se zabývá stahováním a zpracováváním těchto dat. \par
Každý dopravní podnik má povinnost zveřejňovat své jízdní řády pro strojové čtení. Tyto data dopravní podniky publikují prostřednictvím Celostátního informačního systému o jízdních řádech(CISJŘ)\cite{cisjr}. Tento systém spravuje firma CHAPS spol. s.r.o.\cite{chaps}. Výstupem CISJŘ je veřejně přístupný ftp server na adrese 'ftp://ftp.cisjr.cz'. Data jsou zveřejňována ve formátu JDF \ref{JDF} a jsou zazipována. \par
Ze struktury a dat těchto souborů mikroslužba pro zpracování jízdních řádů vytvoří v databázovém systému MongoDB \ref{mongo} dokumenty jednotlivých spojení veřejné dopravy. Tento dokument obsahuje informace o příjezdech a odjezdech ze zastávek, jejich pevné kódy, typ vozidla a další. Jednotlivé spojení veřejné dopravy jsou jednoznačně identifikavatelná za pomoci kombinace čísla linky a čísla spoje.
\subsection {komunikace s jednotlivými podniky}
/*V aktuální době však neexistuje žádné podobné nařízení, které by upravovalo zveřejňování dat o aktuálních polohách vozidel. Jednostlivé dopravní podniky však mají většinou dispečink, ze kterého mohou aktuální polohu vozidel monitorovat. Existence dopravních dispečinků napovídá že tato
každý dopravce má svůj vlastní přístup k datům*/
\subsubsection{jednoduchost přidání dalšího dopravce}
\subsection {získávání dat spojů}
přiřazení aktuálně jedoucích vozidel k odpovídajícím statickým spojům
\subsection {cache}
cache dat o poloze a nejčastějších spojích a zastávkách
\subsection {graphql}
Poslední službou, je služba, která má za úkol poskytovat všechna získaná data frontendové části. K tomuto úkolu bylo nasazeno rozhraní GraphQL. Správné využití GraphQL zabraňuje přebytečnému stahování velkého množství dat, a pomáhá ke zjednodušení komunikace.\par
Hlavními informacemi které backend poskytuje frontendové části, jsou aktuální polohy vozidel. K tomuto účelu slouží subscription 'GetVehicles', která každých 10 sekund pošle nová data.\par
Pro získání dodatečných informací o spoji slouží query "GetConnectionDetail", které potřebuje dva argumenty, číslo linky "line\_name" \
a číslo spoje "connection\_number", k jedinečné identifikaci spoje.\par
\subsection{Nasazení na server}
Platforma je nasazena na